#!/bin/bash
#
# uncenz-kill -- kill screencasting/tcpdumpping session that uncenz-1st started
#
# Copyright 2015, Miroslav Rovis, www.CroatiaFidelis.hr
#
# released under BSD license, pls. see LICENSE
#
# Pls. note that with this initial presentation of this program-to-be, or this
# idea for a program to develop, you probably will not get any meaningful
# results if you try and run concurrent sessions or if you try and run another
# nonrelated instance of ffmpeg or tcpdump process.
#
ffpid=`sudo -s ps aux | egrep 'ffmpeg' | grep x11grab | awk '{ print $2}'`
dupid=`sudo -s ps aux | egrep '[d]umpcap' | awk '{ print $2}'`

echo \$ffpid is: # ff for ffmpeg
echo $ffpid

echo \$dupid is: # du for tcpdump
echo $dupid

echo "To kill ffmpeg and tcpdump, hit Enter"
echo "Or you can terminate this script without killing ffmpeg and tcpdump"
echo "with issuing: Ctrl-C"

read FAKE

#sudo -s kill $dupid $ffpid
kill $dupid $ffpid
